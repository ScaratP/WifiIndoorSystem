# Wi-Fi 室內定位系統

![Android](https://img.shields.io/badge/Platform-Android-3DDC84?logo=android)
![Kotlin](https://img.shields.io/badge/Language-Kotlin-0095D5?logo=kotlin)
![Compose](https://img.shields.io/badge/UI-Jetpack%20Compose-4285F4?logo=jetpack-compose)

## 📱 專案概述

Wi-Fi 室內定位系統是一個基於 Wi-Fi 訊號強度的室內位置識別應用程式。在 GPS 訊號無法有效覆蓋的室內環境中，本系統利用環境中的 Wi-Fi 訊號特徵建立「電子指紋」，實現高精度的室內位置確定。

## ✨ 核心功能

### 參考點管理
- **建立參考點**：在室內地圖上標記位置參考點，記錄對應的 Wi-Fi 訊號特徵
- **視覺化參考點**：參考點在地圖上以彩色標記顯示，直觀易讀
- **參考點詳情**：查看每個參考點的座標和收集的 Wi-Fi 訊號資料

### 地圖功能
- **互動式地圖**：支援縮放、平移等手勢操作
- **直接標記**：透過點擊地圖直接建立新參考點
- **座標輸入**：可手動輸入精確座標位置
- **即時顯示**：參考點即時顯示在地圖上，帶有名稱標籤

### Wi-Fi 掃描與分析
- **自動掃描**：定期掃描環境中的 Wi-Fi 訊號
- **手動更新**：支援使用者手動觸發掃描更新
- **信號視覺化**：以色彩區分不同強度的 Wi-Fi 訊號
- **詳細資訊**：顯示 SSID、BSSID、訊號強度和頻率

### 位置估算
- **即時定位**：根據當前 Wi-Fi 環境估算當前位置
- **準確度指示**：顯示位置估算的可信度級別
- **視覺反饋**：在地圖上清晰標示估算位置

### 資料管理
- **本地儲存**：使用 Room 資料庫安全儲存參考點和 Wi-Fi 資料
- **資料匯出**：將參考點資料匯出為 JSON 格式，方便備份和分析
- **自訂檔案名稱**：使用者可以自訂匯出檔案的名稱

## 🛠️ 技術規格

### 系統需求
- **作業系統**：Android 12.0 (API 31) 或更高版本
- **硬體要求**：支援 Wi-Fi 的 Android 裝置
- **權限**：位置權限 (用於 Wi-Fi 掃描)、儲存權限 (用於資料匯出)

### 開發技術
- **程式語言**：Kotlin
- **UI 框架**：Jetpack Compose 與 Material Design 3
- **資料儲存**：Room 資料庫
- **序列化**：Gson
- **非同步處理**：Kotlin Coroutines

## 📋 使用指南

### 初次使用
1. 啟動應用程式時，系統會請求必要的位置權限
2. 授予權限後，您將看到主畫面，顯示目前的 Wi-Fi 環境

### 建立參考點
#### 方法 1：使用地圖
1. 點擊主畫面上的「顯示地圖」按鈕或右上角的地圖圖示
2. 在互動式地圖上，點擊您想要建立參考點的位置
3. 為參考點命名，並設定掃描次數
4. 點擊「儲存參考點」完成建立

#### 方法 2：手動輸入
1. 點擊主畫面右下角的「新增參考點」按鈕
2. 輸入參考點名稱和 X、Y 座標值
3. 設定掃描次數
4. 點擊「儲存參考點」完成建立

### 查看參考點資訊
1. 在主畫面的參考點列表中點擊任意參考點
2. 將顯示詳細資訊，包含參考點基本資料和記錄的 Wi-Fi 訊號

### 使用互動地圖
1. 在地圖視圖中，您可以：
   - **縮放**：使用捏合手勢放大或縮小地圖
   - **平移**：拖動地圖移動視角
   - **標記**：點擊任意位置直接新增參考點
2. 所有參考點會以彩色圓點顯示在地圖上
3. 當前估算位置會以大圓圈顯示

### 匯出資料
1. 點擊主畫面右上角的儲存圖示
2. 輸入要匯出的 JSON 檔案名稱
3. 透過系統檔案選擇器選擇儲存位置

## 🧩 專案結構

- **MainActivity.kt**：應用程式入口點和主要頁面
- **IndoorPositioningScreen.kt**：室內定位功能的UI和邏輯
- **WifiScanner.kt**：Wi-Fi掃描功能的UI和邏輯
- **data classes**：
  - ReferencePoint：參考點資料結構
  - WifiReading：Wi-Fi讀數資料結構
  - ReferencePointDatabase：參考點資料庫管理類

## 注意事項

- 此應用程式需要位置權限才能掃描Wi-Fi網路，這是Android系統的要求
- Wi-Fi掃描功能可能會增加電池耗電量
- 參考點資料僅儲存在裝置上，建議定期匯出以防資料遺失
